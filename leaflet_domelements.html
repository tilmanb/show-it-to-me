<html>
<head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"
    integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"
    integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw=="
    crossorigin=""></script>

    <style type="text/css">
    #map { height: 600px; width:600px; float: left;}
	#tab { float: left; margin-left: 2em;}
	#tab tr:hover { background-color: #f4a742; }
    </style>
	<script src="jquery.min.js"></script>
	
</head>
<body>
<div id="map">

</div>

<table id="tab">
<thead>
<tr><th>id</th><th>note</th></tr>
</thead>
<tbody id="tabbody">
</tbody>
</table>

<script>

  var test_lonlat = { "lon": 9.89431, "lat":52.44972 };


  var mymap = L.map('map').setView([test_lonlat.lat, test_lonlat.lon], 14);
  
  var selectedColor = '#f4a742';
  var unselectedColor = '#fefefe'

  var ic = L.icon({
    iconUrl: 'circle.png',
    iconSize: [64,64],
    iconAnchor: [32,32],
  });
  
var unselectedStyle = {
    radius: 4,
    fillColor: unselectedColor,
    color: "#000",
    weight: 1,
    opacity: 1,
    fillOpacity: 0.8
};

var selectedStyle = {
    radius: 8,
    fillColor: selectedColor,
    color: "#000",
    weight: 1,
    opacity: 1,
    fillOpacity: 0.8
};
  
  var osmlayer = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {
    attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
  }).addTo(mymap);
  

  var baseMaps = { 
    "OSM":osmlayer,
  };
  
  var cir = L.marker([test_lonlat.lat, test_lonlat.lon], {icon: ic}).addTo(mymap);
  //L.marker([51.5, -0.09]).addTo(mymap);
  
  

  function onMapClick(e) {
    cir.setLatLng(e.latlng)
  }

  mymap.on('click', onMapClick);
  

  
  var geojsonpoint = function(lon,lat,props) {
    return {
      "type": "Feature",
      "properties": props,
      "geometry": {
      "type": "Point",
      "coordinates": [
        lon,
        lat
        
      ]
      }
    }
  }
  
  var make_fc = function(geomarray) {
    return {
      
        "type": "FeatureCollection",
        "features": geomarray
      
    }
  }
  
  var p1 = geojsonpoint(test_lonlat.lon+0.001, test_lonlat.lat+0.002, {"id":1,"note": "bla"});
  var p2 = geojsonpoint(test_lonlat.lon+0.005, test_lonlat.lat+0.005, {"id":2,"note": "jjdjdjdj"})
  var p3 = geojsonpoint(test_lonlat.lon-0.005, test_lonlat.lat-0.005, {"id":3,"note": "XXXXXX"})
  
  var fc_functions = make_fc([p1,p2,p3]);
  
  var featureMap = {0: null}; // id: feature
  
  var fcoll_from_func_layer = L.geoJson(fc_functions, {
			pointToLayer: function(feature,latlng) {
				return new L.CircleMarker(latlng, {
					radius: 7,
					fillOpacity: 0.85
				  });
			},
			style: styleForFeature,
            onEachFeature: function(feature,layer) {
				feature.properties.is_selected = false;
  				var feature_tr = L.DomUtil.create('tr');
				var indextd = L.DomUtil.create('td');
				indextd.innerText = feature.properties.id;
				var notetd = L.DomUtil.create('td');
				notetd.innerText = feature.properties.note;
				feature_tr.appendChild(indextd);
				feature_tr.appendChild(notetd);
				feature_tr.setAttribute('data-id',feature.properties.id);
				document.getElementById('tabbody').appendChild(feature_tr);
				featureMap[feature.properties.id] = feature;
            }
		}
		).addTo(mymap);
  
  
  
  var overlays = { "Klickbarer Kreis ": cir, "JSON aus Funktionen":fcoll_from_func_layer };
  
  L.control.layers(baseMaps, overlays).addTo(mymap);
  
  var selectedFeature;
  
  var styleForFeature = function(feat) {
  // style for not selected features
  return unselectedStyle;
}
  
var redrawLayerMarkers = function() {
  fcoll_from_func_layer.eachLayer(function(l) {
    if (l.feature == selectedFeature) {
      l.setStyle({
        fillColor: selectedColor,
      })
    } else {
      l.setStyle(styleForFeature(l.feature));
    }
  });
};
  
var createHoverHandler = function() {

  $("#map").on('hover', function(enter_event) {
    console.log('hover enter')
  },
  function(leave_event) {
    console.log('hover leave')
  }
  );
  };
  
</script>

</body>
</html>